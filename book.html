<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ChapterPrep ‚Äî Chapitres</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="dashboard.css" />
    <link rel="stylesheet" href="book.css" />
  </head>
  <body class="dashboard-body">

    <!-- ‚îÄ‚îÄ Navbar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <header class="navbar">
      <div class="navbar__left">
        <a href="app.html" class="navbar__back" aria-label="Retour au dashboard">&#8592;</a>
        <span class="navbar__brand">ChapterPrep</span>
      </div>
      <div class="navbar__user">
        <span class="navbar__username" id="nav-username"></span>
        <button class="btn btn--outline" id="logout-btn">D√©connexion</button>
      </div>
    </header>

    <!-- ‚îÄ‚îÄ Contenu principal ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <main class="dashboard">

      <!-- En-t√™te du livre -->
      <section class="book-header">
        <div class="book-header__info">
          <p class="book-header__label">Livre</p>
          <h2 class="book-header__title" id="book-title">‚Ä¶</h2>
          <p class="book-header__author" id="book-author"></p>
        </div>
        <button class="btn btn--primary" id="add-chapter-btn">+ Ajouter un chapitre</button>
      </section>

      <!-- Liste des chapitres -->
      <section class="chapters">
        <h3 class="books__title">Chapitres</h3>

        <!-- √âtat vide -->
        <div class="empty-state" id="empty-state">
          <div class="empty-state__icon">üìÑ</div>
          <p class="empty-state__text">Aucun chapitre pour l'instant.<br />Colle le texte d'un chapitre pour commencer.</p>
          <button class="btn btn--primary" id="add-chapter-empty-btn">+ Ajouter le premier chapitre</button>
        </div>

        <!-- Liste -->
        <ul class="chapter-list" id="chapter-list" hidden></ul>
      </section>
    </main>

    <!-- ‚îÄ‚îÄ Modale : Ajouter un chapitre ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <div class="modal-overlay" id="modal-overlay" hidden>
      <div class="modal modal--wide" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal__header">
          <h3 class="modal__title" id="modal-title">Nouveau chapitre</h3>
          <button class="modal__close" id="modal-close" aria-label="Fermer">&times;</button>
        </div>
        <form id="add-chapter-form" class="modal__form" novalidate>
          <div class="form__group">
            <label for="chapter-number" class="form__label">Num√©ro du chapitre</label>
            <input type="number" id="chapter-number" class="form__input" min="1" placeholder="ex¬†: 3" required />
          </div>

          <div class="form__group">
            <label for="target-language" class="form__label">Langue du livre</label>
            <input type="text" id="target-language" class="form__input" placeholder="ex¬†: anglais" required />
          </div>

          <div class="form__group">
            <label for="chapter-level" class="form__label">Ton niveau</label>
            <select id="chapter-level" class="form__input">
              <option value="A1">A1 ‚Äî D√©butant</option>
              <option value="A2">A2 ‚Äî √âl√©mentaire</option>
              <option value="B1">B1 ‚Äî Interm√©diaire</option>
              <option value="B2" selected>B2 ‚Äî Interm√©diaire avanc√©</option>
              <option value="C1">C1 ‚Äî Avanc√©</option>
              <option value="C2">C2 ‚Äî Ma√Ætrise</option>
            </select>
          </div>

          <div class="form__group">
            <label for="translation-mode" class="form__label">Mode d‚Äôapprentissage</label>
            <select id="translation-mode" class="form__input">
              <option value="translation">Traduction en fran√ßais</option>
              <option value="definition">D√©finition dans la langue cible</option>
            </select>
          </div>

          <div class="form__group">
            <label for="chapter-content" class="form__label">Texte du chapitre</label>
            <textarea
              id="chapter-content"
              class="form__input form__textarea"
              placeholder="Colle ici le texte du chapitre‚Ä¶"
              rows="10"
              required
            ></textarea>
          </div>

          <!-- Statistiques live -->
          <div class="word-stats" id="word-stats" hidden>
            <div class="word-stats__count">
              <span class="word-stats__value" id="word-count">0</span>
              <span class="word-stats__label">mots d√©tect√©s</span>
            </div>
            <div class="word-stats__divider"></div>
            <div class="word-stats__recommendation">
              <span class="word-stats__label">Mots √† extraire recommand√©s&nbsp;:</span>
              <strong class="word-stats__rec-value" id="rec-value">5</strong>
            </div>
          </div>

          <!-- Contr√¥le manuel du nombre de mots √† extraire -->
          <div class="form__group" id="extract-group" hidden>
            <div class="extract-label-row">
              <label for="words-to-extract" class="form__label">Mots √† extraire par le LLM</label>
              <span class="extract-current" id="extract-current">5</span>
            </div>
            <input
              type="range"
              id="words-to-extract"
              class="form__range"
              min="3"
              max="60"
              value="5"
            />
            <p class="form__hint">5 mots pour 100 mots de texte est une bonne base. Ajuste selon la densit√© du vocabulaire.</p>
          </div>

          <p class="form__error" id="add-chapter-error" aria-live="polite"></p>
          <div class="modal__actions" id="modal-actions">
            <button type="button" class="btn btn--ghost" id="modal-cancel-btn">Annuler</button>
            <button type="submit" class="btn btn--primary" id="add-chapter-submit-btn">Enregistrer</button>
          </div>
        </form>

        <!-- ‚îÄ‚îÄ Vue s√©lection des mots ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
        <div id="word-selection-view" hidden>
          <p class="word-selection-hint" id="word-selection-hint"></p>
          <ul class="word-selection-list" id="word-list"></ul>
          <p class="form__error" id="word-selection-error" aria-live="polite"></p>
          <div class="modal__actions">
            <button type="button" class="btn btn--ghost" id="back-to-form-btn">‚Üê Retour</button>
            <button type="button" class="btn btn--primary" id="confirm-selection-btn">Confirmer la s√©lection</button>
          </div>
        </div>
      </div>
    </div>

    <script src="book.js"></script>
  </body>
</html>
